{{>Common/header}}
{{>Common/top_container}}
<script src="/assets/js/ajaxRequest.js"></script>
<h1 style="text-align: center;">Descubre las secciones</h1><br>

<div style="display: flex; justify-content: center; margin-top: 20px;">
  <form method="GET" action="/section/search">
    <input type="text" name="title" placeholder="Buscar por título">
    <select name="orderBy">
      <option value="title">Ordenar por título (A-Z)</option>
      <option value="rating">Ordenar por rating (alto a bajo)</option>
    </select>
    <button type="submit">Buscar</button>
  </form>
</div>


{{#successMessage}}
<p class="text-light" style="text-align: center; background-color: green;">{{successMessage}}</p>
{{/successMessage}}

{{#isSearch}}
<form action="/section" method="get" style="text-align: center; margin-bottom: 20px;">
  <button type="submit" style="background-color: palevioletred; color: palevioletred; border: none; color: white; border-radius: 25px">Todas las secciones</button>
</form>
{{/isSearch}}

{{#noResult}}
<p class="text-light" style="text-align: center; background-color: red;">No se ha encontrado ninguna sección</p>
{{/noResult}}


<div class="live-stream">
  <div class="col-lg-12">
    <div class="heading-section">
      <h4><em>Todas las</em> Secciones</h4>
    </div>
  </div>
  <div class="row" id="sections-list">
    {{#sections}}
    <div class="col-lg-4 col-md-6 col-sm-12">
      <div class="item">
        <div class="thumb">
          <img src="/section/{{id}}/image" alt="" class="section-image">
          <div class="hover-effect">
            <ul>
              <li>
                <a href="/section/{{id}}">Ver sección</a>
              </li>
              <li>
                <a>
                  <form action="/section/{{id}}/delete" method="post" style="display:inline;">
                    <button type="submit"
                      style="background-color: palevioletred; color: palevioletred; border: none; color: white">Borrar
                      sección</button>
                  </form>
                </a>
              </li>
              <li>
                <a href="/section/{{id}}/edit">Editar</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="down-content">
          <h4 style="text-align: center;">{{title}}</h4>
          <p style="text-align: center;">{{description}}</p>
        </div>
        
      </div>
    </div>
    {{/sections}}

    

    
    
    <div id="loading-spinner" style="display: none; text-align: center; margin-top: 20px;">
        <img src="/images/spinner.gif" alt="Cargando..." style="width: 50px; height: 50px;">
    </div>
    
      <nobr>
        {{#hasNext}}
        <div class="col-lg-12" style="text-align: center; margin-top: 20px;">
          <button id="load-more-sections" data-page="{{next}}" >
            Cargar más secciones
          </button>
        </div>{{/hasNext}}
      </nobr>


    </div><br>
    <div class="col-lg-12">
      <div class="main-button">
        <a href="/section/new">Añadir sección</a>
      </div>
    </div>
    <div>
  </div>
</div>
{{>Common/bottom_container}}
{{>Common/footer}}